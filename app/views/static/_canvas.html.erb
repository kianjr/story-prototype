<canvas id="canvas" width="400" height="400"></canvas>
<script>
  const canvas = new fabric.Canvas("canvas")
  canvas.isDrawingMode = true

  function writeCanvasToForm(){
    const form_field = document.getElementById("canvas_text")
    form_field.value = JSON.stringify(canvas)
  }

  function toggleMode(){
    canvas.isDrawingMode = !canvas.isDrawingMode
    if (canvas.isDrawingMode) { document.getElementById("mode").innerText = 'Drawing Mode' }
    else { document.getElementById("mode").innerText = 'Select Mode' }
  }

  function removeActive(){
    var active = canvas.getActiveObject()
    canvas.remove(active)
  }

  function addCircle(){
    var circle = new fabric.Circle(
      { radius: 30, fill: '', strokeWidth: 1, stroke: 'black'}
    )
    canvas.add(circle)
  }

  function addRect(){
    var rect = new fabric.Rect(
      { width: 40, height: 30, fill: '', strokeWidth: 1, stroke: 'black'}
    )
    canvas.add(rect)
  }

  function addBackground(){
    canvas.setBackgroundImage("https://res.cloudinary.com/dm3ooe9xy/image/upload/c_scale,w_400/v1598898839/Story/bw1.jpg", canvas.renderAll.bind(canvas))
  }

  function clearBackground(){
    canvas.setBackgroundImage(null, canvas.renderAll.bind(canvas))
  }

  canvas.on('after:render', writeCanvasToForm)
</script>
<p id="mode">Drawing Mode</p>
<button onClick="toggleMode()" >Toggle Mode</button>
<button onClick="removeActive()" >Delete Selected Object</button>
<button onClick="addCircle()" >Add Circle</button>
<button onClick="addRect()" >Add Rectangle</button>
<button onClick="addBackground()" >Add Background</button>
<button onClick="clearBackground()" >Clear Background</button>
